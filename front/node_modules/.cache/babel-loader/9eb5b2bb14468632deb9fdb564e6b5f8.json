{"ast":null,"code":"var _jsxFileName = \"/home/milan/react-excercise/front/src/components/Serbia.js\",\n    _s = $RefreshSig$();\n\nimport HighchartsReact from \"highcharts-react-official\";\nimport Highcharts from \"highcharts\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport DataProvider from \"../services/DataProvider\";\nimport { filter } from \"rxjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst buttons = [{\n  value: \"Female\",\n  key: \"FMLE\"\n}, {\n  value: \"Male\",\n  key: \"MLE\"\n}, {\n  value: \"Both Genders\",\n  key: \"BTSX\"\n}, {\n  value: \"Compare\",\n  key: \"CMP\"\n}];\n\nconst dataFilter = (key, data) => {\n  let series;\n  series = data === null || data === void 0 ? void 0 : data.filter(_ref => {\n    let {\n      Dim1\n    } = _ref;\n    return Dim1 === key;\n  }).map(_ref2 => {\n    let {\n      TimeDimensionValue,\n      NumericValue\n    } = _ref2;\n    return [parseInt(TimeDimensionValue), NumericValue];\n  }).sort((a, b) => {\n    return a[0] - b[0];\n  });\n  return series;\n};\n\nconst singleDataChartOptions = (gender, data) => {\n  let options = {\n    title: {\n      text: \"Blood Pressure index for Serbia population\"\n    }\n  };\n  const series = dataFilter(gender.key, data);\n  options = { ...options,\n    chart: {},\n    series: {\n      name: gender.value,\n      data: series\n    }\n  };\n  return options;\n};\n\nconst comparisonChartOptions = data => {\n  let options = {\n    title: {\n      text: \"Blood Pressure index comparison by gender\"\n    }\n  };\n  const femaleSeries = dataFilter(\"FMLE\", data);\n  let maleSeries = dataFilter(\"MLE\", data);\n  maleSeries.forEach(s => {\n    s[1] = s[1] * -1;\n  });\n  options = { ...options,\n    accessibility: {\n      point: {\n        valueDescriptionFormat: \"{index}. Age {xDescription}, {value}%.\"\n      }\n    },\n    xAxis: [{\n      reversed: false,\n      // labels: {\n      //   step: 1,\n      // },\n      accessibility: {\n        description: \"Blood pressure index (female)\"\n      }\n    }, {\n      // mirror axis on right side\n      opposite: true,\n      reversed: false,\n      linkedTo: 0,\n      // labels: {\n      //   step: 1,\n      // },\n      accessibility: {\n        description: \"Blood pressure index (male)\"\n      }\n    }],\n    yAxis: {\n      title: {\n        text: null\n      },\n      labels: {\n        formatter: function () {\n          return Math.abs(this.value);\n        }\n      },\n      accessibility: {\n        description: \"Blood pressure index, comparison by gender in Serbia\"\n      }\n    },\n    plotOptions: {\n      series: {\n        stacking: \"normal\"\n      }\n    },\n    series: [{\n      name: \"Female\",\n      data: femaleSeries\n    }, {\n      name: \"Male\",\n      data: maleSeries\n    }]\n  };\n  return options;\n};\n\nconst SerbiaData = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const [chartOptions, setChartOptions] = useState({});\n\n  const optionSetter = button => {\n    if (button.key !== \"CMP\") {\n      const options = singleDataChartOptions(button, data);\n      setChartOptions(options);\n    } else {\n      const options = comparisonChartOptions(data);\n      setChartOptions(options);\n    }\n  };\n\n  useEffect(() => {\n    const getData = async () => {\n      const data = await DataProvider.getSerbiaData();\n      setData(data); // set chart options for initial render\n\n      const options = singleDataChartOptions(buttons[0], data);\n      setChartOptions(options);\n    };\n\n    getData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Serbia Graph here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), buttons.map(b => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          optionSetter(b);\n        },\n        children: b.value\n      }, b.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(HighchartsReact, {\n      highcharts: Highcharts,\n      options: chartOptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SerbiaData, \"OVygtphRWzNllYnsxHhWMJZdwWs=\");\n\n_c = SerbiaData;\nexport default SerbiaData; // const defineComparisonChart = () => {\n//   let options = {\n//     title: { text: \"Blood Pressure index comparison for Serbia population\" },\n//   };\n//   let series = [];\n//   const maleData = data\n//     .filter(({ Dim1 }) => Dim1 === \"MLE\")\n//     .map(({ TimeDimensionValue, NumericValue }) => [\n//       parseInt(TimeDimensionValue * -1),\n//       NumericValue,\n//     ])\n//     .sort((a, b) => {\n//       return a[0] - b[0];\n//     });\n// };\n\nvar _c;\n\n$RefreshReg$(_c, \"SerbiaData\");","map":{"version":3,"sources":["/home/milan/react-excercise/front/src/components/Serbia.js"],"names":["HighchartsReact","Highcharts","useCallback","useEffect","useState","DataProvider","filter","buttons","value","key","dataFilter","data","series","Dim1","map","TimeDimensionValue","NumericValue","parseInt","sort","a","b","singleDataChartOptions","gender","options","title","text","chart","name","comparisonChartOptions","femaleSeries","maleSeries","forEach","s","accessibility","point","valueDescriptionFormat","xAxis","reversed","description","opposite","linkedTo","yAxis","labels","formatter","Math","abs","plotOptions","stacking","SerbiaData","setData","chartOptions","setChartOptions","optionSetter","button","getData","getSerbiaData"],"mappings":";;;AAAA,OAAOA,eAAP,MAA4B,2BAA5B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,SAASC,MAAT,QAAuB,MAAvB;;AAEA,MAAMC,OAAO,GAAG,CACd;AAAEC,EAAAA,KAAK,EAAE,QAAT;AAAmBC,EAAAA,GAAG,EAAE;AAAxB,CADc,EAEd;AAAED,EAAAA,KAAK,EAAE,MAAT;AAAiBC,EAAAA,GAAG,EAAE;AAAtB,CAFc,EAGd;AAAED,EAAAA,KAAK,EAAE,cAAT;AAAyBC,EAAAA,GAAG,EAAE;AAA9B,CAHc,EAId;AAAED,EAAAA,KAAK,EAAE,SAAT;AAAoBC,EAAAA,GAAG,EAAE;AAAzB,CAJc,CAAhB;;AAOA,MAAMC,UAAU,GAAG,CAACD,GAAD,EAAME,IAAN,KAAe;AAChC,MAAIC,MAAJ;AAEAA,EAAAA,MAAM,GAAGD,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CACTL,MADK,CACE;AAAA,QAAC;AAAEO,MAAAA;AAAF,KAAD;AAAA,WAAcA,IAAI,KAAKJ,GAAvB;AAAA,GADF,EAENK,GAFM,CAEF;AAAA,QAAC;AAAEC,MAAAA,kBAAF;AAAsBC,MAAAA;AAAtB,KAAD;AAAA,WAA0C,CAC7CC,QAAQ,CAACF,kBAAD,CADqC,EAE7CC,YAF6C,CAA1C;AAAA,GAFE,EAMNE,IANM,CAMD,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACd,WAAOD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAf;AACD,GARM,CAAT;AAUA,SAAOR,MAAP;AACD,CAdD;;AAgBA,MAAMS,sBAAsB,GAAG,CAACC,MAAD,EAASX,IAAT,KAAkB;AAC/C,MAAIY,OAAO,GAAG;AACZC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,IAAI,EAAE;AAAR;AADK,GAAd;AAGA,QAAMb,MAAM,GAAGF,UAAU,CAACY,MAAM,CAACb,GAAR,EAAaE,IAAb,CAAzB;AACAY,EAAAA,OAAO,GAAG,EACR,GAAGA,OADK;AAERG,IAAAA,KAAK,EAAE,EAFC;AAGRd,IAAAA,MAAM,EAAE;AAAEe,MAAAA,IAAI,EAAEL,MAAM,CAACd,KAAf;AAAsBG,MAAAA,IAAI,EAAEC;AAA5B;AAHA,GAAV;AAKA,SAAOW,OAAP;AACD,CAXD;;AAaA,MAAMK,sBAAsB,GAAIjB,IAAD,IAAU;AACvC,MAAIY,OAAO,GAAG;AACZC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,IAAI,EAAE;AAAR;AADK,GAAd;AAGA,QAAMI,YAAY,GAAGnB,UAAU,CAAC,MAAD,EAASC,IAAT,CAA/B;AACA,MAAImB,UAAU,GAAGpB,UAAU,CAAC,KAAD,EAAQC,IAAR,CAA3B;AACAmB,EAAAA,UAAU,CAACC,OAAX,CAAoBC,CAAD,IAAO;AACxBA,IAAAA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAf;AACD,GAFD;AAGAT,EAAAA,OAAO,GAAG,EACR,GAAGA,OADK;AAERU,IAAAA,aAAa,EAAE;AACbC,MAAAA,KAAK,EAAE;AACLC,QAAAA,sBAAsB,EAAE;AADnB;AADM,KAFP;AAORC,IAAAA,KAAK,EAAE,CACL;AACEC,MAAAA,QAAQ,EAAE,KADZ;AAEE;AACA;AACA;AACAJ,MAAAA,aAAa,EAAE;AACbK,QAAAA,WAAW,EAAE;AADA;AALjB,KADK,EAUL;AACE;AACAC,MAAAA,QAAQ,EAAE,IAFZ;AAGEF,MAAAA,QAAQ,EAAE,KAHZ;AAIEG,MAAAA,QAAQ,EAAE,CAJZ;AAKE;AACA;AACA;AACAP,MAAAA,aAAa,EAAE;AACbK,QAAAA,WAAW,EAAE;AADA;AARjB,KAVK,CAPC;AA8BRG,IAAAA,KAAK,EAAE;AACLjB,MAAAA,KAAK,EAAE;AACLC,QAAAA,IAAI,EAAE;AADD,OADF;AAILiB,MAAAA,MAAM,EAAE;AACNC,QAAAA,SAAS,EAAE,YAAY;AACrB,iBAAOC,IAAI,CAACC,GAAL,CAAS,KAAKrC,KAAd,CAAP;AACD;AAHK,OAJH;AASLyB,MAAAA,aAAa,EAAE;AACbK,QAAAA,WAAW,EAAE;AADA;AATV,KA9BC;AA2CRQ,IAAAA,WAAW,EAAE;AACXlC,MAAAA,MAAM,EAAE;AACNmC,QAAAA,QAAQ,EAAE;AADJ;AADG,KA3CL;AAgDRnC,IAAAA,MAAM,EAAE,CACN;AACEe,MAAAA,IAAI,EAAE,QADR;AAEEhB,MAAAA,IAAI,EAAEkB;AAFR,KADM,EAKN;AACEF,MAAAA,IAAI,EAAE,MADR;AAEEhB,MAAAA,IAAI,EAAEmB;AAFR,KALM;AAhDA,GAAV;AA2DA,SAAOP,OAAP;AACD,CArED;;AAuEA,MAAMyB,UAAU,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACrC,IAAD,EAAOsC,OAAP,IAAkB7C,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAAC8C,YAAD,EAAeC,eAAf,IAAkC/C,QAAQ,CAAC,EAAD,CAAhD;;AAEA,QAAMgD,YAAY,GAAIC,MAAD,IAAY;AAC/B,QAAIA,MAAM,CAAC5C,GAAP,KAAe,KAAnB,EAA0B;AACxB,YAAMc,OAAO,GAAGF,sBAAsB,CAACgC,MAAD,EAAS1C,IAAT,CAAtC;AACAwC,MAAAA,eAAe,CAAC5B,OAAD,CAAf;AACD,KAHD,MAGO;AACL,YAAMA,OAAO,GAAGK,sBAAsB,CAACjB,IAAD,CAAtC;AACAwC,MAAAA,eAAe,CAAC5B,OAAD,CAAf;AACD;AACF,GARD;;AAUApB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMmD,OAAO,GAAG,YAAY;AAC1B,YAAM3C,IAAI,GAAG,MAAMN,YAAY,CAACkD,aAAb,EAAnB;AACAN,MAAAA,OAAO,CAACtC,IAAD,CAAP,CAF0B,CAG1B;;AACA,YAAMY,OAAO,GAAGF,sBAAsB,CAACd,OAAO,CAAC,CAAD,CAAR,EAAaI,IAAb,CAAtC;AACAwC,MAAAA,eAAe,CAAC5B,OAAD,CAAf;AACD,KAND;;AAOA+B,IAAAA,OAAO;AACR,GATQ,EASN,EATM,CAAT;AAWA,sBACE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEG/C,OAAO,CAACO,GAAR,CAAaM,CAAD,IAAO;AAClB,0BACE;AACE,QAAA,OAAO,EAAE,MAAM;AACbgC,UAAAA,YAAY,CAAChC,CAAD,CAAZ;AACD,SAHH;AAAA,kBAMGA,CAAC,CAACZ;AANL,SAIOY,CAAC,CAACX,GAJT;AAAA;AAAA;AAAA;AAAA,cADF;AAUD,KAXA,CAFH,eAcE,QAAC,eAAD;AAAiB,MAAA,UAAU,EAAER,UAA7B;AAAyC,MAAA,OAAO,EAAEiD;AAAlD;AAAA;AAAA;AAAA;AAAA,YAdF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkBD,CA3CD;;GAAMF,U;;KAAAA,U;AA6CN,eAAeA,UAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import HighchartsReact from \"highcharts-react-official\";\nimport Highcharts from \"highcharts\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport DataProvider from \"../services/DataProvider\";\nimport { filter } from \"rxjs\";\n\nconst buttons = [\n  { value: \"Female\", key: \"FMLE\" },\n  { value: \"Male\", key: \"MLE\" },\n  { value: \"Both Genders\", key: \"BTSX\" },\n  { value: \"Compare\", key: \"CMP\" },\n];\n\nconst dataFilter = (key, data) => {\n  let series;\n\n  series = data\n    ?.filter(({ Dim1 }) => Dim1 === key)\n    .map(({ TimeDimensionValue, NumericValue }) => [\n      parseInt(TimeDimensionValue),\n      NumericValue,\n    ])\n    .sort((a, b) => {\n      return a[0] - b[0];\n    });\n\n  return series;\n};\n\nconst singleDataChartOptions = (gender, data) => {\n  let options = {\n    title: { text: \"Blood Pressure index for Serbia population\" },\n  };\n  const series = dataFilter(gender.key, data);\n  options = {\n    ...options,\n    chart: {},\n    series: { name: gender.value, data: series },\n  };\n  return options;\n};\n\nconst comparisonChartOptions = (data) => {\n  let options = {\n    title: { text: \"Blood Pressure index comparison by gender\" },\n  };\n  const femaleSeries = dataFilter(\"FMLE\", data);\n  let maleSeries = dataFilter(\"MLE\", data);\n  maleSeries.forEach((s) => {\n    s[1] = s[1] * -1;\n  });\n  options = {\n    ...options,\n    accessibility: {\n      point: {\n        valueDescriptionFormat: \"{index}. Age {xDescription}, {value}%.\",\n      },\n    },\n    xAxis: [\n      {\n        reversed: false,\n        // labels: {\n        //   step: 1,\n        // },\n        accessibility: {\n          description: \"Blood pressure index (female)\",\n        },\n      },\n      {\n        // mirror axis on right side\n        opposite: true,\n        reversed: false,\n        linkedTo: 0,\n        // labels: {\n        //   step: 1,\n        // },\n        accessibility: {\n          description: \"Blood pressure index (male)\",\n        },\n      },\n    ],\n    yAxis: {\n      title: {\n        text: null,\n      },\n      labels: {\n        formatter: function () {\n          return Math.abs(this.value);\n        },\n      },\n      accessibility: {\n        description: \"Blood pressure index, comparison by gender in Serbia\",\n      },\n    },\n    plotOptions: {\n      series: {\n        stacking: \"normal\",\n      },\n    },\n    series: [\n      {\n        name: \"Female\",\n        data: femaleSeries,\n      },\n      {\n        name: \"Male\",\n        data: maleSeries,\n      },\n    ],\n  };\n  return options;\n};\n\nconst SerbiaData = () => {\n  const [data, setData] = useState([]);\n  const [chartOptions, setChartOptions] = useState({});\n\n  const optionSetter = (button) => {\n    if (button.key !== \"CMP\") {\n      const options = singleDataChartOptions(button, data);\n      setChartOptions(options);\n    } else {\n      const options = comparisonChartOptions(data);\n      setChartOptions(options);\n    }\n  };\n\n  useEffect(() => {\n    const getData = async () => {\n      const data = await DataProvider.getSerbiaData();\n      setData(data);\n      // set chart options for initial render\n      const options = singleDataChartOptions(buttons[0], data);\n      setChartOptions(options);\n    };\n    getData();\n  }, []);\n\n  return (\n    <div>\n      <h2>Serbia Graph here</h2>\n      {buttons.map((b) => {\n        return (\n          <button\n            onClick={() => {\n              optionSetter(b);\n            }}\n            key={b.key}\n          >\n            {b.value}\n          </button>\n        );\n      })}\n      <HighchartsReact highcharts={Highcharts} options={chartOptions} />\n    </div>\n  );\n};\n\nexport default SerbiaData;\n\n// const defineComparisonChart = () => {\n//   let options = {\n//     title: { text: \"Blood Pressure index comparison for Serbia population\" },\n//   };\n//   let series = [];\n//   const maleData = data\n//     .filter(({ Dim1 }) => Dim1 === \"MLE\")\n//     .map(({ TimeDimensionValue, NumericValue }) => [\n//       parseInt(TimeDimensionValue * -1),\n//       NumericValue,\n//     ])\n//     .sort((a, b) => {\n//       return a[0] - b[0];\n//     });\n// };\n"]},"metadata":{},"sourceType":"module"}